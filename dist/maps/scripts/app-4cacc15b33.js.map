{"version":3,"sources":["scripts/app.js"],"names":["angular","module","factory","$http","COMMON","SarusFetch","this","items","busy","index","prototype","nextPage","id","url","ServerURL","get","success","data","push","bind","directive","$window","$state","currentState","current","stateName","name","query","obj","restrict","scope","updateUrl","link","el","attr","element","e","r","getBoundingClientRect","top","elIn","innerHeight","$apply","transitionTo","location","notify","reload","replace","item","sarusTemplate","templateUrl","attrs","$timeout","callback","distance","disabled","elem","win","onScroll","oldValue","newValue","windowHeight","elementBottom","offsetTop","offsetHeight","windowBottom","scrollY","pageYOffset","remaining","shouldGetMore","parseInt","$watch","isDisabled","$on","unbind","adInfo","adClientId","adSlotId","adSize","compile","tElement","tAttrs","transclude","pre","iElement","iAttrs","controller","containerId","$id","JSON","parse","firstChild","googletag","cmd","defineSlot","networkCode","addService","pubads","enableSingleRequest","enableServices","display","constant","numberOfRecordsPerPage","FrontEndURLPattern","config","$locationProvider","$urlMatcherFactoryProvider","html5Mode","strictMode","$stateProvider","$injector","introState","state","$sce","vm","trustAsHtml","pageNumber","nids","nid","sarus","run","$templateCache","put"],"mappings":"CAAA,SAAUA,GACRA,EAAQC,OAAO,YACb,eAEDD,SAEF,SAASC,GACRA,EAAOC,QAAQ,cAAA,QAAA,SAAc,SAASC,EAAOC,GAC3C,GAAIC,GAAa,WACfC,KAAKC,SACLD,KAAKE,MAAO,EACZF,KAAKG,MAAQ,EAcf,OAXAJ,GAAWK,UAAUC,SAAW,SAASC,GACvC,IAAIN,KAAKE,KAAT,CACAF,KAAKE,MAAO,CACZ,IAAIK,GAAMT,EAAOU,WAAaF,GAAM,GACpCT,GAAMY,IAAIF,GAAKG,QAAQ,SAASC,GAC9BX,KAAKC,MAAMW,KAAKD,EAAK,IACrBX,KAAKE,MAAO,EACZF,KAAKG,SACLU,KAAKb,SAGFD,OAERL,QAAQC,OAAO,aAElB,SAAUD,GACRA,EAAQC,OAAO,YAAYmB,UAAU,aAAA,UAAA,SAAA,SAAa,SAASC,EAASC,EAClElB,GACA,GAAImB,GAAeD,EAAOE,QACtBC,EAAYF,GAAgBA,EAAaG,KACzCC,EAAQvB,EAAOuB,MACfC,IACJ,QACEC,SAAU,IACVC,OACEC,UAAW,KAEbC,KAAM,SAASF,EAAOG,EAAIC,GAExBlC,EAAQmC,QAAQd,GAASF,KAAK,SAAU,SAASiB,GAC/C,GAAIC,GAAIJ,EAAG,GAAGK,wBACVC,EAAMF,EAAEE,IACRC,EAAQD,GAAO,GAAKA,GAAOlB,EAAQoB,WACvCX,GAAMY,SACFF,IACFZ,EAAID,GAASG,EAAMC,UACnBT,EAAOqB,aAAalB,EAAWG,GAC7BgB,UAAU,EACVC,QAAQ,EACRC,QAAQ,aAOnB9C,SAEH,SAAUA,GACRA,EAAQC,OAAO,YACZmB,UAAU,iBAAkB,WAC3B,WAEDA,UAAU,YAAa,WACtB,OACES,SAAU,IACVkB,SAAS,EACTjB,OACEkB,KAAM,IACNC,cAAe,KAEjBC,YAAa,oCACblB,KAAM,SAASF,EAAOG,EAAIkB,SAG/BnD,SAEF,SAASA,GACRA,EAAQC,OAAO,YACZmB,UAAU,kBAAA,UAAA,WAAkB,SAC3BC,EAAS+B,GACT,OACEtB,OACEuB,SAAU,kBACVC,SAAU,0BACVC,SAAU,2BAEZvB,KAAM,SAASF,EAAO0B,EAAML,GAC1B,GAAIM,GAAMzD,EAAQmC,QAAQd,GAEtBqC,EAAW,SAASC,EAAUC,GAChC,IAAI9B,EAAMyB,SAAV,CAGA,GAAIM,GAAeJ,EAAI,GAAGhB,YACtBqB,EAAgBN,EAAK,GAAGO,UAAYP,EAAK,GAAGQ,aAC5CC,EAAeJ,GAAgBJ,EAAI,GAAGS,SAAWT,EACnD,GAAGU,aACDC,EAAYN,EAAgBG,EAC5BI,EAAiBD,EAAYE,SAASxC,EAAMwB,UAC9C,EAAG,KAAO,CAERe,IACFjB,EAAStB,EAAMuB,WAInBvB,GAAMyC,OAAO,WAAY,SAASC,IAC5B,IAAUA,GAAYd,MAG5BD,EAAItC,KAAK,SAAUuC,GACnB5B,EAAM2C,IAAI,WAAY,WACpBhB,EAAIiB,OAAO,SAAUhB,KAEvBN,EAASM,UAKhB1D,SAEF,SAASA,GACRA,EAAQC,OAAO,YAAYmB,UAAU,OAAA,SAAO,SAASuD,GACnD,OACE9C,SAAU,IACVC,OACE8C,WAAY,IACZC,SAAU,IACVC,OAAQ,KAEV5B,YAAa,6BACb6B,QAAS,SAAiBC,EAAUC,EAAQC,GAC1C,OACEC,IAAK,SAAiBrD,EAAOsD,EAAUC,EAAQC,GAC7C,GAAIC,GAAc,cAAgBzD,EAAM0D,IACpCV,EAASW,KAAKC,MAAM5D,EAAMgD,UAAY,IAAK,KAC3C7C,EAAK+C,EAAS,GAAGW,UACjB1D,KACFA,EAAGrB,GAAK2E,GAEVK,UAAUC,IAAI3E,KAAK,WACH0E,UAAUE,WACtBnB,EAAOoB,YAAajB,EACpBS,GACAS,WAAWJ,UAAUK,SACvBL,WAAUK,SAASC,sBACnBN,UAAUO,mBAEZP,UAAUC,IAAI3E,KAAK,WACjB0E,UAAUQ,QAAQb,cAO7BvF,SAEH,SAAUC,GACRA,EAAOoG,SAAS,UACdC,uBAAwB,EACxBxF,UAAW,iDACXyF,mBAAoB,MACpB5E,MAAO,MAET1B,EAAOoG,SAAS,UACdN,YAAa,yCAEd/F,QAAQC,OAAO,aAElB,SAAUA,GACRA,EAAOuG,QAAA,oBAAA,6BAAO,SAASC,EAAmBC,GACxCD,EAAkBE,WAAU,GAC5BD,EAA2BE,YAAW,OAEvC5G,QAAQC,OAAO,aAElB,SAAUA,GACRA,EAAOuG,QAAA,iBAAA,YAAO,SAASK,EAAgBC,GACrC,GAAI1G,GAAS0G,EAAU/F,IAAI,UACvBF,EAAMT,EAAOmG,mBACbQ,GACFrF,KAAM,QACNb,IAAKA,EACLqC,YAAa,0BACboC,WAAY,sBAEduB,GAAeG,MAAMD,OAEtB/G,QAAQC,OAAO,aAElBD,QAAQC,OAAO,YACZqF,WAAW,iBAAA,aAAA,OAAA,SAAiB,SAASjF,EAAY4G,EAAM7G,GACtD,GAAI8G,GAAK5G,IACT4G,GAAGC,YAAcF,EAAKE,YACtBD,EAAGE,WAAa,EAChBF,EAAGZ,uBAAyBlG,EAAOkG,uBACnCY,EAAGG,OACDC,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAEPA,IAAO,UAETJ,EAAGK,MAAQ,GAAIlH,MAGnBL,QAAQC,OAAO,YAAYuH,KAAK,iBAAkB,SAASC,GAAiBA,EAAeC,IAAI,mCAAmC,+OAClID,EAAeC,IAAI,0BAA0B,qkGAC7CD,EAAeC,IAAI,6BAA6B,eAChDD,EAAeC,IAAI,oCAAoC","file":"scripts/app-4cacc15b33.js","sourcesContent":["(function(angular) {\n  angular.module('sarusApp', [\n    'ui.router'\n  ]);\n})(angular)\n\n(function(module) {\n  module.factory('SarusFetch', function($http, COMMON) {\n    var SarusFetch = function() {\n      this.items = [];\n      this.busy = false;\n      this.index = 0;\n    };\n\n    SarusFetch.prototype.nextPage = function(id) {\n      if (this.busy) return;\n      this.busy = true;\n      var url = COMMON.ServerURL + (id || '');\n      $http.get(url).success(function(data) {\n        this.items.push(data[0])\n        this.busy = false;\n        this.index++;\n      }.bind(this));\n    };\n\n    return SarusFetch;\n  });\n})(angular.module('sarusApp'));\n\n(function(angular) {\n  angular.module('sarusApp').directive('updateUrl', function($window, $state,\n    COMMON) {\n    var currentState = $state.current;\n    var stateName = currentState && currentState.name;\n    var query = COMMON.query;\n    var obj = {};\n    return {\n      restrict: 'A',\n      scope: {\n        updateUrl: '@'\n      },\n      link: function(scope, el, attr) {\n        // var lastScrollTop = 0;\n        angular.element($window).bind(\"scroll\", function(e) {\n          var r = el[0].getBoundingClientRect();\n          var top = r.top;\n          var elIn = (top >= 0 && top <= $window.innerHeight);\n          scope.$apply();\n          if (elIn) {\n            obj[query] = scope.updateUrl;\n            $state.transitionTo(stateName, obj, {\n              location: true,\n              notify: false,\n              reload: false\n            })\n          }\n        });\n      }\n    };\n  });\n})(angular);\n\n(function(angular) {\n  angular.module('sarusApp')\n    .directive('sarusContainer', function() {\n      return {}\n    })\n    .directive('sarusItem', function() {\n      return {\n        restrict: 'E',\n        replace: true,\n        scope: {\n          item: '=',\n          sarusTemplate: '@'\n        },\n        templateUrl: 'app/directive/sarus-item.tpl.html',\n        link: function(scope, el, attrs) {}\n      }\n    })\n})(angular)\n\n(function(angular) {\n  angular.module('sarusApp')\n    .directive('infiniteScroll', function(\n      $window, $timeout) {\n      return {\n        scope: {\n          callback: '&infiniteScroll',\n          distance: '=infiniteScrollDistance',\n          disabled: '=infiniteScrollDisabled'\n        },\n        link: function(scope, elem, attrs) {\n          var win = angular.element($window);\n\n          var onScroll = function(oldValue, newValue) {\n            if (scope.disabled) {\n              return;\n            }\n            var windowHeight = win[0].innerHeight;\n            var elementBottom = elem[0].offsetTop + elem[0].offsetHeight;\n            var windowBottom = windowHeight + (win[0].scrollY || win[\n              0].pageYOffset);\n            var remaining = elementBottom - windowBottom;\n            var shouldGetMore = (remaining - parseInt(scope.distance ||\n              0, 10) <= 0);\n\n            if (shouldGetMore) {\n              $timeout(scope.callback);\n            }\n          };\n\n          scope.$watch('disabled', function(isDisabled) {\n            if (false === isDisabled) onScroll();\n          });\n\n          win.bind('scroll', onScroll);\n          scope.$on('$destroy', function() {\n            win.unbind('scroll', onScroll);\n          });\n          $timeout(onScroll);\n        }\n      };\n    });\n\n})(angular)\n\n(function(angular) {\n  angular.module('sarusApp').directive('ads', function(adInfo) {\n    return {\n      restrict: 'A',\n      scope: {\n        adClientId: '@',\n        adSlotId: '@',\n        adSize: '@'\n      },\n      templateUrl: 'app/directive/ads.tpl.html',\n      compile: function compile(tElement, tAttrs, transclude) {\n        return {\n          pre: function preLink(scope, iElement, iAttrs, controller) {\n            var containerId = \"div-gpt-ad-\" + scope.$id;\n            var adSize = JSON.parse(scope.adSize) || [300, 200];\n            var el = tElement[0].firstChild;\n            if (el) {\n              el.id = containerId;\n            }\n            googletag.cmd.push(function() {\n              var adSlot1 = googletag.defineSlot(\n                adInfo.networkCode, adSize,\n                containerId\n              ).addService(googletag.pubads());\n              googletag.pubads().enableSingleRequest();\n              googletag.enableServices();\n            });\n            googletag.cmd.push(function() {\n              googletag.display(containerId);\n            });\n          },\n        }\n      },\n    };\n  });\n})(angular);\n\n(function(module) {\n  module.constant('COMMON', {\n    numberOfRecordsPerPage: 1,\n    ServerURL: 'http://sarus-openredesign.pantheonsite.io/api/',\n    FrontEndURLPattern: '/:q',\n    query: 'q'\n  });\n  module.constant('adInfo', {\n    networkCode: '/6355419/Travel/Europe/France/Paris' // please replace this test network code\n  })\n})(angular.module('sarusApp'));\n\n(function(module) {\n  module.config(function($locationProvider, $urlMatcherFactoryProvider) {\n    $locationProvider.html5Mode(true);\n    $urlMatcherFactoryProvider.strictMode(false)\n  });\n})(angular.module('sarusApp'));\n\n(function(module) {\n  module.config(function($stateProvider, $injector) {\n    var COMMON = $injector.get('COMMON');\n    var url = COMMON.FrontEndURLPattern;\n    var introState = {\n      name: \"intro\",\n      url: url,\n      templateUrl: \"app/controller/get.html\",\n      controller: \"GetController as vm\"\n    };\n    $stateProvider.state(introState);\n  });\n})(angular.module('sarusApp'));\n\nangular.module('sarusApp')\n  .controller(\"GetController\", function(SarusFetch, $sce, COMMON) {\n    var vm = this;\n    vm.trustAsHtml = $sce.trustAsHtml;\n    vm.pageNumber = 1;\n    vm.numberOfRecordsPerPage = COMMON.numberOfRecordsPerPage;\n    vm.nids = [{\n      \"nid\": \"21700\"\n    }, {\n      \"nid\": \"21699\"\n    }, {\n      \"nid\": \"21698\"\n    }, {\n      \"nid\": \"21697\"\n    }, {\n      \"nid\": \"21696\"\n    }, {\n      \"nid\": \"21693\"\n    }, {\n      \"nid\": \"21692\"\n    }, {\n      \"nid\": \"21691\"\n    }, {\n      \"nid\": \"21690\"\n    }, {\n      \"nid\": \"21689\"\n    }, {\n      \"nid\": \"21688\"\n    }, {\n      \"nid\": \"21687\"\n    }, {\n      \"nid\": \"21686\"\n    }, {\n      \"nid\": \"21683\"\n    }, {\n      \"nid\": \"21682\"\n    }, {\n      \"nid\": \"21681\"\n    }, {\n      \"nid\": \"21680\"\n    }, {\n      \"nid\": \"21679\"\n    }, {\n      \"nid\": \"21678\"\n    }];\n    vm.sarus = new SarusFetch();\n  });\n\nangular.module(\"sarusApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/controller/get-view.tpl.html\",\"<div class=row><div class=col-12><div ads ad-size=\\\"[728, 90]\\\"></div></div></div><div class=row><div class=col-8>{{item.body[0].value}}</div><div class=col-4><div ads ad-size=[300,250]></div><div ads ad-size=[300,250]></div></div></div>\");\n$templateCache.put(\"app/controller/get.html\",\"<style>*{\\n      box-sizing: border-box;\\n    }\\nhtml,\\nbody {\\n  height: 100%;\\n  width: 100%;\\n  margin: 0;\\n  padding: 0;\\n  left: 0;\\n  top: 0;\\n  font-size: 100%;\\n}\\n\\n/* ROOT FONT STYLES */\\n\\n* {\\n  color: #333447;\\n  line-height: 1.5;\\n}\\n\\n/* TYPOGRAPHY */\\n\\nh1 {\\n  font-size: 2.5rem;\\n}\\n\\nh2 {\\n  font-size: 2rem;\\n}\\n\\nh3 {\\n  font-size: 1.375rem;\\n}\\n\\nh4 {\\n  font-size: 1.125rem;\\n}\\n\\nh5 {\\n  font-size: 1rem;\\n}\\n\\nh6 {\\n  font-size: 0.875rem;\\n}\\n\\np {\\n  font-size: 1.125rem;\\n  font-weight: 200;\\n  line-height: 1.8;\\n}\\n\\n.font-light {\\n  font-weight: 300;\\n}\\n\\n.font-regular {\\n  font-weight: 400;\\n}\\n\\n.font-heavy {\\n  font-weight: 700;\\n}\\n\\n/* POSITIONING */\\n\\n.left {\\n  text-align: left;\\n}\\n\\n.right {\\n  text-align: right;\\n}\\n\\n.center {\\n  text-align: center;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.justify {\\n  text-align: justify;\\n}\\n\\n/* ==== GRID SYSTEM ==== */\\n\\n.container {\\n  width: 90%;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.row {\\n  position: relative;\\n  width: 100%;\\n}\\n\\n.row [class^=\\\"col\\\"] {\\n  float: left;\\n  margin: 0.5rem 2%;\\n  min-height: 0.125rem;\\n}\\n\\n.col-1,\\n.col-2,\\n.col-3,\\n.col-4,\\n.col-5,\\n.col-6,\\n.col-7,\\n.col-8,\\n.col-9,\\n.col-10,\\n.col-11,\\n.col-12 {\\n  width: 96%;\\n}\\n\\n.col-1-sm {\\n  width: 4.33%;\\n}\\n\\n.col-2-sm {\\n  width: 12.66%;\\n}\\n\\n.col-3-sm {\\n  width: 21%;\\n}\\n\\n.col-4-sm {\\n  width: 29.33%;\\n}\\n\\n.col-5-sm {\\n  width: 37.66%;\\n}\\n\\n.col-6-sm {\\n  width: 46%;\\n}\\n\\n.col-7-sm {\\n  width: 54.33%;\\n}\\n\\n.col-8-sm {\\n  width: 62.66%;\\n}\\n\\n.col-9-sm {\\n  width: 71%;\\n}\\n\\n.col-10-sm {\\n  width: 79.33%;\\n}\\n\\n.col-11-sm {\\n  width: 87.66%;\\n}\\n\\n.col-12-sm {\\n  width: 96%;\\n}\\n\\n.row::after {\\n\tcontent: \\\"\\\";\\n\tdisplay: table;\\n\tclear: both;\\n}\\n\\n.hidden-sm {\\n  display: none;\\n}\\n\\n@media only screen and (min-width: 33.75em) {  /* 540px */\\n  .container {\\n    width: 80%;\\n  }\\n}\\n\\n@media only screen and (min-width: 45em) {  /* 720px */\\n  .col-1 {\\n    width: 4.33%;\\n  }\\n\\n  .col-2 {\\n    width: 12.66%;\\n  }\\n\\n  .col-3 {\\n    width: 21%;\\n  }\\n\\n  .col-4 {\\n    width: 29.33%;\\n  }\\n\\n  .col-5 {\\n    width: 37.66%;\\n  }\\n\\n  .col-6 {\\n    width: 46%;\\n  }\\n\\n  .col-7 {\\n    width: 54.33%;\\n  }\\n\\n  .col-8 {\\n    width: 62.66%;\\n  }\\n\\n  .col-9 {\\n    width: 71%;\\n  }\\n\\n  .col-10 {\\n    width: 79.33%;\\n  }\\n\\n  .col-11 {\\n    width: 87.66%;\\n  }\\n\\n  .col-12 {\\n    width: 96%;\\n  }\\n\\n  .hidden-sm {\\n    display: block;\\n  }\\n}\\n\\n@media only screen and (min-width: 60em) { /* 960px */\\n  .container {\\n    width: 75%;\\n    max-width: 60rem;\\n  }\\n}\\n    .item {\\n      min-height:1000px;\\n      background-color:#eee;\\n      list-style-type: none;\\n      border: 0 dotted #ddd;\\n      border-bottom-width: 1px;\\n      margin:10px 10px;\\n    }</style><div class=container infinite-scroll-distance=100 infinite-scroll-disabled=vm.sarus.busy infinite-scroll=vm.sarus.nextPage(vm.nids[vm.sarus.index].nid)><div><div class=item update-url=url-{{$index}} ng-repeat=\\\"item in vm.sarus.items track by $index\\\"><sarus-item sarus-template=app/controller/get-view.tpl.html item=item></sarus-item></div></div></div>\");\n$templateCache.put(\"app/directive/ads.tpl.html\",\"<div></div>\");\n$templateCache.put(\"app/directive/sarus-item.tpl.html\",\"<div ng-include src=sarusTemplate></div>\");}]);"],"sourceRoot":"/source/"}